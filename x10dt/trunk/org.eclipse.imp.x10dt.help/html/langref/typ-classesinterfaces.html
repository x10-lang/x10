<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
<title>Classes and interfaces</title>
</head>

<body>
 <h2><a name="tth_sEc1">
1</a>&nbsp;&nbsp;Classes and interfaces</h2>
<a name="ReferenceTypes">
</a>

<div class="p"><!----></div>
     <h3><a name="tth_sEc1.1">
1.1</a>&nbsp;&nbsp;Class types</h3>

<div class="p"><!----></div>
A <em>class declaration</em> (&#167;) introduces a <em>class type</em>
containing all instances of the class.  The <b>Position</b> class below
could describe the position of a slider control, for example.

<div class="p"><!----></div>
<pre>
class Position {
  private var x : Int = 0;
  public def move(dx:Int) { x += dx; }
  public def pos() : Int = x;
}
</pre>

<div class="p"><!----></div>
Class instances, also called objects, are created via constructor calls. Class
instances have fields and methods, type members, and value properties bound at
construction time. In addition, classes have static members: constant fields,
type definitions, and member classes and member interfaces.

<div class="p"><!----></div>
A class with type parameters is <em>generic</em>. A class type is instantiatable
only if all of its parameters are instantiated on concrete types.  The
<b>Cell[T]</b> class provides a container capable of holding a value of type
<b>T</b>, or being empty.

<div class="p"><!----></div>
<pre>
class Cell[T] {
  var empty : Boolean = true;
  var contents : T;
  public def putIn(t:T) { 
    contents = t; empty = false; 
  }
  public def emptyOut() { empty = true; }
  public def isEmpty() = empty;
  public def getOut():T throws Exception {
     if (empty) throw new Exception(&#203;mpty!");
     return contents ;
  }
}
</pre>

<div class="p"><!----></div>
X10 does not permit mutable static state. A fundamental principle of the
X10 model of computation is that all mutable state be local to some place
(&#167;), and, as static variables are globally available, they
cannot be mutable. When mutable global state is necessary, programmers should
use singleton classes, putting the state in an object and using place-shifting
commands (&#167;) and atomicity (&#167;) as necessary
to mutate it safely.

<div class="p"><!----></div>
Classes are structured in a single-inheritance hierarchy. All classes extend
the class <b>x10.lang.Object</b>, directly or indirectly. Each class other than
<b>Object</b> extends a single parent class.  <b>Object</b> provides no behavior
of its own, beyond that required by <b>Any</b>.

<div class="p"><!----></div>
Variables of class type may contain the value <b>null</b>. 

<div class="p"><!----></div>
     <h3><a name="tth_sEc1.2">
1.2</a>&nbsp;&nbsp;Interface types</h3>
<a name="InterfaceTypes">
</a>

<div class="p"><!----></div>
An <em>interface declaration</em> (&#167;) defines an <em>
interface type</em>, specifying a set of methods, type members, and
properties which must be provided by any class declared to implement the
interface. 

<div class="p"><!----></div>
Interfaces can also have static members: constant fields, type definitions,
and member classes and interfaces.  However, interfaces cannot specify that
implementing classes must provide static members.

<div class="p"><!----></div>
An interface may extend multiple interfaces.  
<pre>
interface Named {
  def name():String;
}
interface Mobile {
  def move(howFar:Int):Void;
}
interface Person extends Named, Mobile {}
interface NamedPoint extends Named, Mobile{} 
</pre>

<div class="p"><!----></div>
Classes may be declared to implement multiple interfaces.
Semantically, the interface type is the set of all objects that are
instances of classes that implement the interface. A class implements
an interface if it is declared to and if it implements all the methods
and properties defined in the interface.  For example, <b>KimThePoint</b>
implements <b>Person</b>, and hence <b>Named</b> and <b>Mobile</b>.  It would be
a static error if <b>KimThePoint</b> had no <b>name</b> method.

<div class="p"><!----></div>
<pre>
class KimThePoint implements Person {
   var pos : Int = 0;
   public def name() = "Kim (" + pos + ")";
   public def move(dPos:Int) { pos += dPos; }
}
</pre>

<div class="p"><!----></div>
     <h3><a name="tth_sEc1.3">
1.3</a>&nbsp;&nbsp;Properties</h3>

<a name="properties">
</a>

<div class="p"><!----></div>
Classes, interfaces, and structs may have <em>properties</em>, public <b>val</b> instance
fields bound on object creation. For example, the following code declares a
class named <b>Coords</b> with properties <b>x</b> and <b>y</b> and a <b>move</b>
method. The properties are bound using the <b>property</b> statement in the
constructor.

<div class="p"><!----></div>
<pre>
class Coords(x: Int, y: Int) {
  def this(x: Int, y: Int) : Coords{self.x==x, self.y==y} 
    = { property(x, y); }
  def move(dx: Int, dy: Int) = new Coords(x+dx, y+dy);
}
</pre>

<div class="p"><!----></div>
Properties, unlike other public <b>val</b> fields, can be used  
at compile time in <em>constraints</em>. This allows us
to specify subtypes based on properties, by appending a boolean expression to
the type. For example, the type <b>Coords{x==0}</b> is the set of all points
whose <b>x</b> property is <b>0</b>.  Details of this substantial topic are
found in &#167;.

<div class="p"><!----></div>

</body>
</html>