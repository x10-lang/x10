<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
	<title>Futures</title>
</head>

<body>
 <h2><a name="tth_sEc8">
8</a>&nbsp;&nbsp;Futures</h2><a name="XtenFutures">
</a>

<div class="p"><!----></div>
X10 provides syntactic support for <em>asynchronous expressions</em>, also
known as futures:

<div class="p"><!----></div>
  :  |        <em>  
<table>
<tr><td align="right">Primary &nbsp;FutureExpression </td></tr>
<tr><td align="right">FutureExpression &nbsp;
  "future" PlaceExpressionSingleList<sup>?</sup>&nbsp;ClosureBody
</td></tr></table>
</em> 

<div class="p"><!----></div>
Intuitively such an expression evaluates its body asynchronously at
the given place. The resulting value may be obtained from the future
returned by this expression, by using the "force" operation.

<div class="p"><!----></div>
In more detail, in an expression "future (Q) e", the place
expression "Q" is treated as in an &#228;sync" statement. &#235;"
is an expression of some type "T". &#235;" may reference only
those variables in the enclosing lexical environment which are
declared to be "final".

<div class="p"><!----></div>
If the type of &#235;" is "T" then the type of
"future (Q) e" is "Future[T]".  This 
type "Future[T]" is defined as if by:
<pre>
package x10.lang;
public interface Future[T] implements () =&#62; T {
  global def forced(): Boolean;
  global def force(): T;
}
</pre>

<div class="p"><!----></div>
Evaluation of "future (Q) e" terminates locally with the creation
of a value "f" of type "Future[T]".  This value may be
stored in objects, passed as arguments to methods, returned from
method invocation etc. 

<div class="p"><!----></div>
At any point, the method "forced" may be invoked on "f". This
method returns without blocking, with the value "true" if the
asynchronous evaluation of &#235;" has terminated globally and with
the value "false" if it has not.

<div class="p"><!----></div>
"Future[T]" is a subtype of the function type "() =&#62; T".
Invoking-<em>forcing</em>-the future "f" blocks until the
asynchronous evaluation of &#235;" has terminated globally. If the
evaluation terminates successfully with value "v", then the method
invocation returns "v". If the evaluation terminates abruptly with
exception "z", then the method throws exception "z". Multiple
invocations of the function (by this or any other activity) do not
result in multiple evaluations of &#235;". The results of the first
evaluation are stored in the future "f" and used to respond to all
queries.

<div class="p"><!----></div>
<pre>
promise: Future[T] = future (a.dist(3)) a(3);
value: T = promise();
</pre>

<div class="p"><!----></div>

</body>
</html>