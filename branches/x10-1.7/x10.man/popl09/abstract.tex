Modern object-oriented languages such as \Xten{} require a rich
framework for types capable of expressing value-dependency,
type-dependency and supporting pluggable, application-specific
extensions.

In earlier work, we presented the framework of \emph{constrained types}
for concurrent, object-oriented languages, parametrized by an
underlying constraint system $\cal C$. Constraint systems are a very
expressive framework for partial information. Types are viewed as
formulas \Xcd{C\{c\}} where \Xcd{C} is the name of a class or an interface
and
\Xcd{c} is a constraint in $\cal C$ on the immutable instance state of
\Xcd{C} (the \emph{properties}). Many (value-)dependent type systems
for object-oriented languages can be viewed as constrained types.

This paper extends the constrained types approach to handle
\emph{type-dependency} (``genericity''). The key idea is to extend
the constraint system to include predicates over types
such as \Xcd{X} is a subtype of \Xcd{T}.  Generic types are supported
by introducing parameters and properties that range over types and
permitting the user program to impose constraints on such
variables. Type-valued properties are required to have a run-time
representation---the run-time semantics is not defined through
erasure. Run-time casts are permitted through dynamic code generation.

To illustrate the underlying theory, we develop a formal family
\FX{}(${\cal C}$) of programming languages with a common set of sound
type-checking rules.  By varying $\cal C$ and extending the type system,
we obtain languages with
the power of \FJ, \FGJ, dependent types,
and new object-oriented languages that
uniformly support value- and type-dependency.  Concretely, we
illustrate with the design and implementation of the type system for
\Xten{}.  The type system integrates and extends the features of
nominal types, virtual types, and path-dependent
types.
