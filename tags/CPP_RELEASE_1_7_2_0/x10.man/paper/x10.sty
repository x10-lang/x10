\usepackage{listings}
%\usepackage{lstpatch}
%\usepackage[keywords]{lstpatch}
%\usepackage{color}

%\definecolor{Brown}{cmyk}{0,0.49,0.71,0.37}
%\definecolor{RoyalBlue}{cmyk}{0.71,0.53,0,0.12}
%\definecolor{OliveGreen}{cmyk}{0.64,0,0.95,0.40}
%\definecolor{Red}{cmyk}{0,0.80,0.80,0.10}
%\definecolor{Gray}{cmyk}{0.2,0.2,0.2,0.2}
%\definecolor{Black}{cmyk}{0,0,0,1}

\lstdefinelanguage{X10}%
  {morekeywords={abstract,break,case,catch,class,%
      const,continue,default,do,else,extends,false,final,%
      finally,for,goto,if,implements,import,instanceof,%
      interface,label,native,new,null,package,private,protected,%
      public,return,static,super,switch,synchronized,this,throw,%
      throws,transient,true,try,void,volatile,while,%
      async,atomic,when,foreach,ateach,finish,clocked,%
      type,here,%
      self,property,%
      future,to,has,as,var,val,def,where,in,%
      next,value,or,await,current,any},%
   basicstyle=\normalfont\ttfamily,%
   keywordstyle=\normalfont\ttfamily,%
   commentstyle=\normalfont\ttfamily,%
   identifierstyle=\normalfont\ttfamily,%
   stringstyle=\normalfont\ttfamily,%
   tabsize=4,%
   showstringspaces=false,%
   sensitive,%
   morecomment=[l]//,%
   morecomment=[s]{/*}{*/},%
   morestring=[b]",%
   morestring=[b]',%
   columns=fullflexible,%
   mathescape=false,%
   keepspaces=true,%
   showlines=false,%
   breaklines=true,%
   breakatwhitespace=true,%
   postbreak={},%
   %breakautoindent=true,%
   %breakindent=0pt,%
   %prebreak={},%
  }

\lstnewenvironment{xten}
  {\lstset{language=X10,breaklines=false,captionpos=b,xleftmargin=2em,mathescape=true}}
  {}

\lstnewenvironment{xtennoindent}
  {\lstset{language=X10,breaklines=false,captionpos=b,mathescape=true}}
  {}

\lstnewenvironment{xtenlines}
  {\lstset{language=X10,numbers=left,numberstyle=\tiny,xleftmargin=15pt,breaklines=false,captionpos=b,mathescape=true}}
  {}

%\newenvironment{x10}{\begin{xten}}{\end{xten}}

\newcommand\inputxten[1]{\begin{minipage}{\textwidth}\lstinputlisting[language=X10,breaklines=false,captionpos=b,numbers=left,numberstyle=\tiny,xleftmargin=15pt]{#1}\end{minipage}}

\lstset{language=X10,flexiblecolumns}

\let\xxxcd\lstinline
\newcommand\xcdmath{\xxxcd[mathescape=true]}

\newcommand{\Xcd}[1]{\mbox{\xxcmath"#1"}}
\newcommand{\xcd}[1]{\mbox{\xcdmath"#1"}}
%\newcommand{\Xcdmath}[1]{{\xcdmath"#1"}}
\newcommand{\Xcdmath}[1]{\mbox{\xcdmath"#1"}}

\newcommand\tcd[1]{\mbox{\tt #1}}

\newcommand\Xten{{\sf X10}}
\newcommand\GXten{{\sf Gen~X10}}

