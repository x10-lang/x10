#!/bin/bash

# If X10_FROM_SRC is set in your environment, then
# this script will default to using paths that assume
# the standard X10 developer setup and a desire to build from source.  
# If it is not set, then the script will use paths that are 
# appropriate for a pre-built distribution of x10. 

UNAME=`uname -s`
FILE_SEP='/'; if [[ "$UNAME" = CYGWIN* ]]; then FILE_SEP='\\'; fi
PATH_SEP=':'; if [[ "$UNAME" = CYGWIN* ]]; then PATH_SEP=';'; fi

prog=$(readlink $0 2>&1)
[ $? -eq 127 -o "$prog" = "" ] && prog="$0"
export X10_DIST="$(cd "$(dirname "$prog")/.." && pwd)"
if [[ "$UNAME" = CYGWIN* ]]; then X10_DIST="$(cygpath -aw "$X10_DIST")"; fi

[ -z "$X10SOURCES" ] && export X10SOURCES="${X10_DIST}/lib/x10.jar"

export CP_OVERRIDE="${X10_DIST}${FILE_SEP}lib${FILE_SEP}x10c.jar${PATH_SEP}${X10_DIST}${FILE_SEP}classes${PATH_SEP}"
export DEXT="x10cpp.ExtensionInfo"

exec "${X10_DIST}/bin/x10c" "$@"

