<html>
<body>

<h1>Windows X10 Command Line Installation</h1>
In order to run X10 on Windows, you need to satisfy the follow pre-requisites.
<h2>Prereqs</h2>
<ul>
	<li>gcc/g++</li>
	<li>java</li>
	<li>open MPI / mpich2</li>
</ul>

<a name="gcc-prereq">
<h3>gcc/g++</h3>
gcc is not installed with Windows. To get gcc you will need to install the Cygwin package.
The latest version is 1.7.7. There are two ways to do this
<ol>
<li>script installation using the cygwin-install package documented 
under <a href="#batch-cygwin">the batch installation</a> 
<li>interactively using the cygwin installer which is documented 
under <a href="#interactive-cygwin">the interactive installation</a> 
</ol>

<a name="batch-cygwin">
<h4>1. Cygwin batch installation</h5>
We have developed a batch installation of Cygwin that you can downloaded
to install the Cygwin environment.  It can be downloaded from 
<a href="http://dist.codehaus.org/x10/documentation/install/cygwin-install.zip">
http://dist.codehaus.org/x10/documentation/install/cygwin-install.zip</a>
<p>
You should download this file to a temporary directory, unzip the contents, and
run "cygsetup.bat".   This will prompt you for your windows id so it can create
the login directory and install some cygwin shell files. Also watch out for any
firewall prompts that you may have to respond to.
<p>
Once the installation is complete you should double check that the Windows PATH
environment variable has been updated to include the following directories:
<ul>
<li>C:\cygwin\bin</li>
<li>C:\cygwin\usr\contrib\mpich2-1.2.1\bin</li>
</ul>
<p>
Once the installation is complete you will be in the cygwin directory, and you
can start cygwin by running "cygwin.bat".  Then you should run "mpd &". 
MPD is the MPICH daemon, which controls/runs/stops the proccesses on your machine.
<p>
We have also supplied another batch file called "addpkg.bat" which can be used
to download additional packages.  For example, you might want to download and 
install the unix editors, vim and emacs.  You would do this by running
<pre>
addpkg vim emacs
</pre>
<p>
For those who are interested in compiling the X10 distribution,
we have also supplied another batch file called "addbuildpkgs.bat" which will
download all the packages you need to build the x10 distribution.
<p>
You can now proceed to checking the <a href="#java-prereq">java prereq.</a>


<a name="interactive-cygwin">
<h4>2. Cygwin interactive installation</h5>
To get the base cygwin do the following
<ul>
<li>Go to the cygwin site
  http://www.cygwin.com/
<li>Click on install or update
  The latest Cygwin release is 1.7.1-1
<li>Save the setup file to a local folder, e.g. cygwinInstall
<li>Execute setup.exe
  Allow any firewall rules, if needed
<li>Click next
<li>select download source, click next
<li>select root install directory, usually C:\cygwin, click next
<li>select local package directory, usually c:\cygwin, click next
<li>select your internet connection, usually Direct connection, click next
<li>select a download site, usually one closest to you, click next
<li>click ok on any setup alerts
<li>select the packages, usually the defaults to begin with, click next
<li>select icons, click Finish
</ul>

<p>
Once the default packages have completed installing, you can start cygwin by
doing the following.
<pre>
cd c:\cygwin
cygwin.bat
</pre>
You should see the skeleton files being created for your userid.  The userid is
created from your windows id.

<p>
Once cygwin is working, you should relaunch setup and select the gcc/g++ compiler that
is required by X10. Note any dependencies will be downloaded also.
<pre>
Devel - 4.3.4-3 - gcc4-g++ G++ subpackage
</pre>

<p>
Select any other packages that you may want. Note any dependencies will be downloaded also.
<pre>
Utils - util-linux 2.14.1
</pre>

<p>
Once the installation is complete you should update the Windows PATH
environment variable  to include the following directories:
<ul>
<li>C:\cygwin\bin</li>
<li>C:\cygwin\usr\contrib\mpich2-1.2.1\bin</li>
</ul>


<a name="java-prereq">
<h3>java</h3>
Java is not included by default with Windows. However, nost people will have installed one already.
If not, you should download and install the latest Sun Java runtime or JDK for 1.5.0_x or 1.6.0_x.
You should install Java in the normal fashion either in "Program Files" or directly at the
root level. Usually you would make this installation your system JVM.
<p>
Cygwin should recognize that you have java installed and use it. The only thing that you should
do is make sure that JAVA_HOME is defined in your environment variables for X10 to use.
You can do this using the Windows control panel System application.
<pre>
Control Panel -> System -> Advanced -> Environment Variables
</pre>
Under System variables, check for JAVA_HOME and if not defined, click edit and enter the 
"Variable name" JAVA_HOME and the "Variable value" as the JRE or JDK path. Click Ok to save
your values.
<p>
You should start cygwin and test for Java by doing the following
<pre>
which java
java -version
echo $JAVA_HOME
</pre>
You should see something like this
<pre>
$ which java
/cygdrive/c/WINDOWS/System32/java

$ java -version
java version "1.5.0_11"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_11-b03)
Java HotSpot(TM) Client VM (build 1.5.0_11-b03, mixed mode)

$ echo $JAVA_HOME
C:\jdk1.5.0_15
</pre>

<a name="openmpi-prereq">
<h3>openmpi / mpich2</h3>
OpenMPI is not include with Windows.
We have created a version of MPICH2 for Windows on the codehaus site that should be downloaded
and installed in the cygwin directory.
<p>
<a name="batch-mpich">
<h5>MPICH batch install</h5>
If you have used the batch installation of cygwin, you can bypass the next section
and proceed to <a href="#getting-started">getting started</a> section.
<p>
<a name="interactive-mpich">
<h5>MPICH interactive install</h5>
Start the cygwin setup again and add this as a Cygwin mirror.
You'll have to run Cygwin setup with -X (command line, or through a shortcut) 
to make it avoid checking signatures.
<pre>
http://dist.codehaus.org/x10/x10dt/2.0/cygwin/
</pre>
If you do not ignore signatures, you will get this error:
<pre>
Unable to get http://dist.codehaus.org/x10/x10dt/2.0/cygwin/setup.ini.sig from 
<http://dist.codehaus.org/x10/x10dt/2.0/cygwin>
</pre>
The following package should be selected
<pre>
Base - 1.2.1-2 - mpich2: A high performance...
</pre>
Click next to install.
</p>
After it is installed you will find mpirun and other commands in
/usr/contrib/mpich2-1.1.1p1/bin
<p>
If you see the following error using mpirun
<pre>
cd /usr/contrib/mpich2-1.1.1p1/bin
./mpirun
/usr/bin/env: python2.5: No such file or directory
</pre>
you need to restart the cygwin setup, select your mirror, and make sure the following package is installed.
<pre>
Python - 2.5.5-1 - python: Python language interpreter
</pre>

<p>
Then you should modify your .bash_profile file to contain this directory in the PATH
<pre>
.bash_profile
PATH=/usr/contrib/mpich2-1.2.1/bin:${PATH}
export PATH
</pre>

<p>
Once the installation is complete you should update the Windows PATH
environment variable  to include the following directories:
<ul>
<li>C:\cygwin\bin</li>
<li>C:\cygwin\usr\contrib\mpich2-1.2.1\bin</li>
</ul>

<a name="getting-started">

<h2>Comments</h2>
Comments and suggestions are welcome. 
Please send email to 
<a href="mailto:cals@us.ibm.com">Cal Swart (cals@us.ibm.com)</a>

</body>

</html>