<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
	<title>Regions</title>
</head>

<body>
 <h2><a name="tth_sEc2">
2</a>&nbsp;&nbsp;Regions</h2><a name="XtenRegions">
</a>


<div class="p"><!----></div>
A region is a set of points of the same rank.  X10
provides a built-in class, <b>x10.array.Region</b>, to allow the
creation of new regions and to perform operations on regions. 
Each region <b>R</b> has a property <b>R.rank</b>, giving the dimensionality of
all the points in it.

<div class="p"><!----></div>
<pre>
val MAX_HEIGHT=20;
val Null = Region.makeUnit();  // Empty 0-dimensional region
val R1 = 1..100; // 1-dim region with extent 1..100
val R2 = (1..100) as Region(1); // same as R1
val R3 = (0..99) * (-1..MAX_HEIGHT);
val R4 = Region.makeUpperTriangular(10);
val R5 = R4 &amp;&amp; R3; // intersection of two regions
</pre>

<div class="p"><!----></div>
The expression `m..n`, for integer expressions <b>m</b> and <b>n</b>,
evaluates to the rectangular, rank-1 region consisting of the points
{`[m]`, ..., `[n]`}. If `m` is greater than
`n`, the region <b>m..n</b> is empty.

<div class="p"><!----></div>
<pre>
</pre>

<div class="p"><!----></div>
Various built-in regions are provided through  factory
methods on <b>Region</b>.  

<ul>
<li> <b>Region.makeEmpty(n)</b> returns an empty region of rank <b>n</b>.
<div class="p"><!----></div>
</li>

<li> <b>Region.makeFull(n)</b> returns the region containing all points of
      rank <b>n</b>.
<div class="p"><!----></div>
</li>

<li> <b>Region.makeUnit()</b> returns the region of rank 0 containing the
      unique point of rank 0.  It is useful as the identity for Cartesian
      product of regions.
<div class="p"><!----></div>
</li>

<li> <b>Region.makeHalfspace(normal:Point, k:Int)</b> returns the unbounded
      half-space of rank <b>normal.rank</b>, consisting of all points <b>p</b>
      satisfying `p&#183;normal  &#8804;  k`.
<div class="p"><!----></div>
</li>

<li> <b>Region.makeRectangular(min, max)</b>, where <b>min</b> and <b>max</b>
      are <b>Int</b> rails or valrails of length <b>n</b>, returns a
      <b>Region(n)</b> equal to: 
      `[min(0) .. max(0), &#8230;, min(n-1)..max(n-1)]`.
<div class="p"><!----></div>
</li>

<li> <b>Region.make(regions)</b> constructs the Cartesian product of the
      <b>Region(1)</b>s in <b>regions</b>.
<div class="p"><!----></div>
</li>

<li> <b>Region.makeBanded(size, upper, lower)</b> constructs the
      banded <b>Region(2)</b> of size <b>size</b>, with <b>upper</b> bands above
      and <b>lower</b> bands below the diagonal.
<div class="p"><!----></div>
</li>

<li> <b>Region.makeBanded(size)</b> constructs the banded <b>Region(2)</b> with
      just the main diagonal.
<div class="p"><!----></div>
</li>

<li> <b>Region.makeUpperTriangular(N)</b> returns a region corresponding
to the non-zero indices in an upper-triangular <b>N x N</b> matrix.
<div class="p"><!----></div>
</li>

<li> <b>Region.makeLowerTriangular(N)</b> returns a region corresponding
to the non-zero indices in a lower-triangular <b>N x N</b> matrix.
<div class="p"><!----></div>
</li>

<li> 
  If <b>R</b> is a region, and <b>p</b> a Point of the same rank, then 
  <b>R+p</b> is <b>R</b> translated forwards by 
  <b>p</b> - the region whose
  points are <b>r+p</b> 
  for each <b>r</b> in <b>R</b>.
<div class="p"><!----></div>
</li>

<li> 
  If <b>R</b> is a region, and <b>p</b> a Point of the same rank, then 
  <b>R-p</b> is <b>R</b> translated backwards by 
  <b>p</b> - the region whose
  points are <b>r-p</b> 
  for each <b>r</b> in <b>R</b>.
<div class="p"><!----></div>
</li>
</ul>

<div class="p"><!----></div>
All the points in a region are ordered canonically by the
lexicographic total order. Thus the points of the region <b>(1..2)*(1..2)</b>
are ordered as 
<pre>
(1,1), (1,2), (2,1), (2,2)
</pre>
Sequential iteration statements such as <b>for</b> (&#167;)
iterate over the points in a region in the canonical order.

<div class="p"><!----></div>
A region is said to be <em>rectangular</em> if it is of
the form `(T<sub>1</sub> * &#8230; * T<sub>k</sub>)` for some set of intervals
`T$<sub>i</sub> = l<sub>i</sub> .. h<sub>i</sub>`. Such a
region satisfies the property that if two points p<sub>1</sub> and p<sub>3</sub> are
in the region, then so is every point p<sub>2</sub> between them (that is, it is <em>convex</em>). 
(Banded and triangular regions are not rectangular.)
The operation
<b>R.boundingBox()</b> gives the smallest rectangular region containing
<b>R</b>.

<div class="p"><!----></div>
     <h3><a name="tth_sEc2.1">
2.1</a>&nbsp;&nbsp;Operations on regions</h3>


<div class="p"><!----></div>
Let <b>R</b> be a region. A <em>sub-region</em> is a subset of <b>R</b>.


<div class="p"><!----></div>
Let `R1` and `R2` be two regions whose types establish that
they are of the same rank. Let `S` be another region; its rank is
irrelevant. 

<div class="p"><!----></div>
`R1 &amp;&amp; R2` is the intersection of `R1` and
`R2`, <em>viz</em>, the region containing all points which are in both
<b>R1</b> and <b>R2</b>.  
For example, <b>1..10 &amp;&amp; 2..20</b> is <b>2..10</b>.

<div class="p"><!----></div>

<div class="p"><!----></div>
`R1 * S` is the Cartesian product of `R1` and
`S`,  formed by pairing each point in `R1` with every  point in `S`.

Thus, <b>(1..2)*(3..4)*(5..6)</b>
is the region of rank <b>3</b> containing the eight points with coordinates
<b>[1,3,5]</b>, <b>[1,3,6]</b>, <b>[1,4,5]</b>, <b>[1,4,6]</b>,
<b>[2,3,5]</b>, <b>[2,3,6]</b>, <b>[2,4,5]</b>, <b>[2,4,6]</b>.

<div class="p"><!----></div>
For a region `R` and point `p` of the same rank,
<b>R+p</b> 
and
<b>R-p</b> 
represent the translation of the region
forward 
and backward 
by `p`. That is, <b>R+p</b> is the set of points
<b>p+q</b> for all <b>q</b> in <b>R</b>, and <b>R-p</b> is the set of <b>q-p</b>.

<div class="p"><!----></div>
More <b>Region</b> methods are described in the API documentation.

<div class="p"><!----></div>

</body>
</html>