<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta name="GENERATOR" content="TtH 3.80">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>
	<title>Assignment</title>
</head>

<body>
 <h2><a name="tth_sEc7">
7</a>&nbsp;&nbsp;Assignment</h2><a name="AssignmentStatement">
</a>

<div class="p"><!----></div>

<em>
  
<table>

<tr><td align="right">Assignment ::= LeftHandSide AssignmentOperator AssignmentExp </td></tr>
<tr><td align="right">&#124; ExpName  <b>(</b> ArgumentList<sup>?</sup>&nbsp;<b>)</b> AssignmentOperator AssignmentExp </td></tr>
<tr><td align="right">&#124; Primary  <b>(</b> ArgumentList<sup>?</sup>&nbsp;<b>)</b> AssignmentOperator AssignmentExp </td></tr>
<tr><td align="right">LeftHandSide ::= ExpName </td></tr>
<tr><td align="right">&#124; FieldAccess </td></tr>
<tr><td align="right">AssignmentOperator ::= <b>=</b> </td></tr>
<tr><td align="right">&#124; <b>*=</b> </td></tr>
<tr><td align="right">&#124; <b>/=</b> </td></tr>
<tr><td align="right">&#124; <b>%=</b> </td></tr>
<tr><td align="right">&#124; <b>+=</b> </td></tr>
<tr><td align="right">&#124; <b>-=</b> </td></tr>
<tr><td align="right">&#124; <b>&lt;&lt;=</b> </td></tr>
<tr><td align="right">&#124; <b>&#62;&#62;=</b> </td></tr>
<tr><td align="right">&#124; <b>&#62;&#62;&#62;=</b> </td></tr>
<tr><td align="right">&#124; <b>&amp;=</b> </td></tr>
<tr><td align="right">&#124; <b>^=</b> </td></tr>
<tr><td align="right">&#124; <b></td><td align="center">&#124;=</b> </td></tr>
<tr><td align="right"></td></tr></table>
</em>

<div class="p"><!----></div>
The assignment expression <b>x = e</b> assigns a value given by
expression <b>e</b>
to a variable <b>x</b>.  
Most often, <b>x</b> is mutable, a <b>var</b> variable.  The same syntax is
used for delayed initialization of a <b>val</b>, but <b>val</b>s can only be
initialized once.
<pre>
  var x : Int;
  val y : Int;
  x = 1;
  y = 2; // Correct; initializes y
  x = 3; 
  // ERROR: y = 4;
</pre>

<div class="p"><!----></div>
There are three syntactic forms of
assignment: 

<ol type="1">
<li> <b>x = e;</b>, assigning to a local variable, formal parameter, field of
      <b>this</b>, etc.
<div class="p"><!----></div>
</li>

<li> <b>x.f = e;</b>, assigning to a field of an object.
<div class="p"><!----></div>
</li>

<li> `a(i<sub>1</sub>,&#8230;,i<sub>n</sub>) = v;`, where n  &#8805; 0, assigning to
      an element of an array or some other such structure. This is an operator
      call (&#167;).  For well-behaved classes it works like
      array assignment, mutatis mutandis, but there is no actual guarantee,
      and the compiler makes no assumptions about how this works for arbitrary <b>a</b>.
      Naturally, it is a static error if no suitable assignment operator
      for <b>a</b>.
<div class="p"><!----></div>
</li>
</ol>

<div class="p"><!----></div>
For a binary operator &#9674;, the &#9674;-assignment expression
"x &#9674;= e" combines the current value of <b>x</b> with the value
of <b>e</b> by &#9674;, and stores the result back into <b>x</b>.  
<b>i += 2</b>, for example, adds 2 to <b>i</b>. For variables and fields, 
"x &#9674;= e" behaves just like "x = x &#9674; e". 

<div class="p"><!----></div>
The subscripting forms of &#228;(i) &#9674;= b" are slightly subtle.
Subexpressions of <b>a</b> and <b>i</b> are only evaluated once.  However,
<b>a(i)</b> and <b>a(i)=c</b> are each executed once-in particular, there is
one call to the application operator, and one to the assignment operator.
If subscripting is implemented strangely for
the class of <b>a</b>, the behavior is <em>not</em> necessarily updating a single
storage location. Specifically, <b>A()(I()) += B()</b> is tantamount to: 
<pre>
{
  val aa = A();  // Evaluate A() once
  val ii = I();  // Evaluate I() once
  val bb = B();  // Evaluate B() once
  val tmp = aa(ii) + bb; // read aa(ii)
  aa(ii) = tmp;  // write sum back to aa(ii)
}
</pre>

<div class="p"><!----></div>
<b><b>Limitation: </b> += does not currently meet this specification.</b>

<div class="p"><!----></div>

</body>
</html>